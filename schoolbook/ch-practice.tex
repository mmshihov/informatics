\chapter{<<Микропрограммное управление>> --- цикл лабораторных работ}
\label{ch::practice}

Теорию построения вычислительных устройств рассмотрим на примере устройства, позволяющего выполнить тот или иной алгоритм умножения.

\begin{figure}[!ht]
    \centering
    \includegraphics{fig/model}
    \caption{Структура вычислительного устройства}
    \label{fig::ch::practice::model}
\end{figure}

Структурно устройство разделяется на три компонента (см. рисунок \ref{fig::ch::practice::model}): 
\begin{itemize}
    \item центральное устройство управления (ЦУУ);
    \item операционная часть множительного устройства (ОЧ); 
    \item управляющая часть множетельного устройства (УЧ).
\end{itemize}

ЦУУ выполняет \emph{программу} пользователя, состоящую из отдельных \emph{команд}. Одной из команд является команда выполнить умножение. ЦУУ не выполняет эту операцию самсостоятельно, а дает задание множительному устройству. Множительное устройство, состоящее из операционной (ОЧ) и управляющей частей (УЧ), является лишь одним из многих устройств, которым ЦУУ перепоручает выполнить сложые операции.

Операция умножения, например, сводится к последовательности операций сложения, которые являются элементарными. Все остальные сложные операции также сводятся к выполнению элементарных операций по определенному алгоритму. \emph{Элементарная} операция выполняется некоторым элементом оборудования\footnote{Например, сложение выполняется логической схемой --- сумматором. См. описание этого элемента в разделе \ref{s::ch::practice::elements}} операционной части (ОЧ) сразу, за фиксированный (и относительно короткий) промежуток времени, называемый \emph{тактом}. В составе любого цифрового устройства имеется таймер, отсчитывающий такты\footnote{Отсюда термин \emph{тактовая частота}: $1/T$, где $T$ --- продолжительность такта}. Поэтому, когда говорится <<сложная операция>>, то подразумевается операция, выполняемая за несколько тактов.

При отсутствии сбоев, между центральным управляющим устройством (ЦУУ) и управляющей частью множительного устройства (УЧ) происходит следующий обмен синалами и данными:
\begin{enumerate}
    \item \textbf{УЧ$\to$ЦУУ:<<Свободен>>}. 
    
    УЧ выдает сигнал в ЦУУ <<Свободен>> всегда, когда не выполняет задачу. Отсутствие сигнала <<Свободен>> от УЧ трактуется ЦУУ как признак того, что множительное устройство занято решением ранее поставленной задачи.
    
    \item \textbf{ЦУУ$\to$УЧ:<<Задание на шине>>, ШД=<<Операнды>>}.

    Убедившись, что множительное устройство готово принять задание (получив от УЧ сигнал <<Свободен>>), ЦУУ выдает в УЧ сигнал <<Задание на шине>>. Передача задания по шине в общем случае может занять один или несколько тактов. Это зависит от принятых соглашений на формат передачи задания --- в общем случае это серия передач по шине данных. Получив сигнал <<Задание на шине>>, УЧ должна в следующем такте снять сигнал <<Свободен>>, и одновременно начать считывать с шины первый фрагмент задания.
    
    \item \textbf{УЧ$\to$ЦУУ:<<Результат готов>>}. 
    
    УЧ с помощью ОЧ выполняет умножение. Этот процесс может длиться довольно долго, и в это время ЦУУ может декодировать следующую команду и, если это возможно, начать её выполнять параллельно с работой мнжительного устройства. Так как при этом по шине данных (ШД) могут передаваться данные, получив результат, УЧ не должно выдавать его на шину сразу. УЧ выдает в ЦУУ осведомительный сигнал <<Результат готов>> и держит его до тех пор, пока ЦУУ не освободит шину.
    
    \item \textbf{ЦУУ$\to$УЧ:<<Шина твоя>>}. 
    
    ЦУУ, получив от УЧ сигнал <<Результат готов>>: завершает (если шина занята) текущую передачу данных по шине; выдает сигнал в УЧ <<Шина твоя>> и снимает его в следующем такте.
    
    \item \textbf{УЧ$\to$ЦУУ:ШД=<<Результат>>}. 
    
    Получив от ЦУУ сигнал <<Шина твоя>>, УЧ следующем такте должна:
    \begin{itemize}
        \item снять сигнал <<Результат готов>>;
        \item выдать на шину первый фрагмент результата, и если необходимо, продолжить в следующих тактах выдачу остальных фрагментов результата.
    \end{itemize}
\end{enumerate}

УЧ множительного устройства, выполняя алгоритм умножения, в каждом такте выдает в ОЧ необходимые управляющие сигналы. Управляющие сигналы формируются УЧ в зависимости от своего внутреннего состояния и осведомительных сигналов, часть которых поступает из ОЧ, а часть из ЦУУ. Аппаратура ОЧ содержит набор необходимых утройств, чтобы выполнить все необходимые элементарные операции.

ОЧ составлена из базовых схемотехнических цифровых элементов: логических элементов, сумматоров, мультиплексоров, триггеров, регистров, операционных усилителей и т.д. Необходимые сведения о работе этих элементов приводятся в разделе \ref{s::ch::practice::elements}.

%пришел ребенок и написал "зцуекнка Сахар словарное слово. рампмика аемпитьтлпаолдююююмпимпмвччвроолпеаакгогрипрппннпрпагшпенучвчаер"

\input{ch-practice-elements}
\input{ch-practice-programming}
\input{ch-practice-software}
